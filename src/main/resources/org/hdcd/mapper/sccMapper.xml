<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.hdcd.mapper.sccMapper">

	<sql id="search">
		<if test="searchType != null">
			<if test="searchType == 't'.toString()">
				AND SCC_NAME LIKE CONCAT('%', #{keyword}, '%')
			</if>
			<if test="searchType == 'd'.toString()">
				AND SCC_DISTRICT LIKE CONCAT('%', #{keyword}, '%')
			</if>
		</if>
	</sql>
    <select id="list" resultType="scc_info">
		<![CDATA[
	 	SELECT *
	 	  FROM scc_info
	 	 WHERE SCC_NUM > 0
	 	 ]]>

	 	 <include refid="search"></include>
	 	 <![CDATA[
	  	 ORDER BY SCC_NUM ASC
		 LIMIT #{pageStart}, #{sizePerPage}
		]]>
	</select>

    <select id="count" resultType="int">
		<![CDATA[
	 	SELECT count(SCC_NUM)
		  FROM scc_info
		 WHERE SCC_NUM > 0
		]]>
		<include refid="search"></include>
	</select>

</mapper>
